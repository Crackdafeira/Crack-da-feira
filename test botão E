local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

local itemPath = workspace.GameMap["construções"].StoreEquipament.BodyStore.DummyBodyW115KG.HumanoidRootPart.Attachment.Body
local itemProximity = 10 -- Define a distância mínima para interação
local holdTimeRequired = 2 -- Tempo necessário em segundos para ativar a compra
local isHoldingE = false
local holdStartTime

-- Função de compra do item
local function comprarItem()
    print("Item comprado!") -- Substitua com o código real de compra
    -- Coloque aqui o código de compra
end

-- Detecta quando o jogador começa a segurar a tecla "E"
UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if gameProcessedEvent then return end -- Ignora se o input já está em uso

    if input.KeyCode == Enum.KeyCode.E then
        -- Verifica se o jogador está próximo o suficiente para iniciar a compra
        if (humanoidRootPart.Position - itemPath.Position).Magnitude <= itemProximity then
            isHoldingE = true
            holdStartTime = tick() -- Marca o tempo inicial de segurar
        else
            print("Você está muito longe para comprar este item.")
        end
    end
end)

-- Detecta quando o jogador solta a tecla "E"
UserInputService.InputEnded:Connect(function(input, gameProcessedEvent)
    if input.KeyCode == Enum.KeyCode.E then
        isHoldingE = false -- Reseta a condição de segurar
    end
end)

-- Verifica continuamente se a tecla "E" foi segurada pelo tempo necessário
RunService.RenderStepped:Connect(function()
    if isHoldingE and (tick() - holdStartTime) >= holdTimeRequired then
        comprarItem() -- Executa a compra se o tempo segurado é suficiente
        isHoldingE = false -- Reseta para evitar múltiplas compras
    end
end)
